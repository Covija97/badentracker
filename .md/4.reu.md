![](https://raw.githubusercontent.com/jcorvid509/.resGen/9cf65965f880c39d5e634d73522a6d656c4ea501/_bannerD.png#gh-dark-mode-only)
![](https://raw.githubusercontent.com/jcorvid509/.resGen/9cf65965f880c39d5e634d73522a6d656c4ea501/_bannerL.png#gh-light-mode-only)

<a href="/.md/readme.md"><img src="https://raw.githubusercontent.com/jcorvid509/.resGen/9cf65965f880c39d5e634d73522a6d656c4ea501/_back.svg" height="30"></a>

# ğŸ“… CRUD de Reuniones (4h)

```mermaid
gantt
    dateFormat  DDD
    axisFormat %j

    section Reuniones<br>(4h)
    Crear modelos               : 01-15, 2d
    Formularios                 : 01-17, 1d
    Listado y filtros           : 01-18, 1d
    Exportar PDF                : 01-19, 1d
```

## ğŸ› ï¸ Crear modelos

> Las tablas principales para reuniones son:
>
> - **prog**: reuniones (`prog_id`, `prog_date`, `prog_time`, `prog_coord`, `prog_place`, `prog_child_N`, `grp_id`, `rama_id`, `responsibles`)
> - **prog_act**: actividades de la reuniÃ³n (`prog_id`, `act_id`, `act_order`, `act_respon`, `act_comment`)
> - **grps**: grupos scouts
> - **rama**: ramas scouts
>
> Las relaciones permiten asociar una reuniÃ³n a un grupo y rama, y mÃºltiples actividades a cada reuniÃ³n.

## ğŸ“ Formularios

> El formulario de alta y ediciÃ³n de reuniones permite seleccionar grupo, rama, lugar, fecha, coordinador, nÃºmero de educandos, responsables y aÃ±adir actividades con hora, actividad, duraciÃ³n, encargado y comentarios.
>
> **Campos adicionales:**
>
> - **DescripciÃ³n**: Breve descripciÃ³n de la reuniÃ³n.
> - **Tipo de reuniÃ³n**: SelecciÃ³n del tipo de reuniÃ³n (Ej: Consejo, Actividad, Otro).
> - **Estado**: Estado de la reuniÃ³n (Programada, Cancelada, Finalizada).

```php
<form method="POST" class="form-grid">
    <button type="submit" class="btn-submit" style="width: 25%;">
        <?php echo $editMode ? 'Actualizar reuniÃ³n' : 'Guardar reuniÃ³n'; ?>
    </button>
    <input type="hidden" name="act_id">
    <!-- Tabla de informaciÃ³n general -->
    <table>
        <tr>
            <td class="branchCell" width="25%">
                <label for="grop_id"><b>Grupo scout</b></label>
            </td>
            <td width="35%">
                <select name="grps[]" id="grps" class="select2" required>
                    <!-- Opciones de grupos -->
                </select>
            </td>
            <td class="branchCell" width="20%">Ronda Solar</td>
            <td width="20%">
                <span id="rondaSolar" style="color:#888;">Calculo automÃ¡tico...</span>
            </td>
        </tr>
        <tr>
            <td class="branchCell"><label for="prog_place">Lugar</label></td>
            <td><input type="text" name="prog_place" id="prog_place"></td>
            <td class="branchCell"><label for="prog_date">Fecha</label></td>
            <td><input type="date" name="prog_date" id="prog_date" required></td>
        </tr>
        <tr>
            <td class="branchCell"><label for="prog_coord">Coordinador</label></td>
            <td><input type="text" name="prog_coord" id="prog_coord"></td>
            <td class="branchCell"><label for="prog_child_N">NÂº educandos</label></td>
            <td><input type="number" name="prog_child_N" id="prog_child_N"></td>
        </tr>
        <tr>
            <td class="branchCell"><label for="rama">Rama</label></td>
            <td class="branchCell" colspan="2"><label for="responsables">Responsables asistentes</label></td>
            <td class="branchCell">Logo del grupo</td>
        </tr>
        <tr>
            <td>
                <select name="rama[]" id="rama" class="select2" required>
                    <!-- Opciones de ramas -->
                </select>
            </td>
            <td colspan="2">
                <textarea id="responsables" name="responsables" rows="2" placeholder="AÃ±ada el nombre de un responsable por cada lÃ­nea..." required></textarea>
            </td>
            <td class="logoCell" style="color:#888;">
                <img id="logoGrupo" src="" alt="Seleccione un grupo">
            </td>
        </tr>
    </table>
    <!-- Tabla de actividades -->
    <table id="actTable">
        <tr class='branchCell'>
            <th width='5%'>NÂº</th>
            <th width='10%'>Hora</th>
            <th width='50%'>Actividad</th>
            <th width='10%'>DuraciÃ³n</th>
            <th width='25%'>Encargado</th>
        </tr>
        <!-- Filas de actividades dinÃ¡micas -->
    </table>
</form>
```

> Las actividades se agregan dinÃ¡micamente con JavaScript, permitiendo seleccionar la actividad, hora, duraciÃ³n (automÃ¡tica), encargado y comentarios.

## ğŸ” Listados y filtros

> El listado de reuniones muestra todas las reuniones con su grupo, fecha, hora y rama. Incluye un input de bÃºsqueda para filtrar dinÃ¡micamente la tabla.
>
> **Funcionalidades adicionales:**
>
> - **PaginaciÃ³n**: Navegar entre pÃ¡ginas de resultados.
> - **Ordenamiento**: Ordenar por columna (fecha, grupo, rama).
> - **Exportar**: OpciÃ³n para exportar el listado a CSV.

```js
function initSearch() {
    document.getElementById("searchInput").addEventListener("keyup", function () {
        var input = removeAccents(this.value.toLowerCase());
        var rows = document.querySelectorAll(".table-main tr");

        rows.forEach(function (row, index) {
            if (index === 0) return; // Saltar la fila de encabezados

            var text = removeAccents(row.textContent.toLowerCase());
            row.style.display = text.includes(input) ? "" : "none";
        });
    });
    document.getElementById('searchInput').addEventListener('input', function () {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll('.table-main tr');
        let visibleRowIndex = 0;

        rows.forEach((row, index) => {
            if (index === 0) return; // Saltar la fila de encabezado

            const text = row.textContent.toLowerCase();
            if (text.includes(filter)) {
                row.style.display = '';
                // Alternar colores de fila
                const isEven = visibleRowIndex % 2 === 0;
                row.style.backgroundColor = isEven ? 'var(--color001)' : 'var(--color004)';
                row.style.color = isEven ? 'var(--color002)' : 'var(--color001)';
                visibleRowIndex++;
            } else {
                row.style.display = 'none';
            }
        });
    });
}
```

> El patrÃ³n de filtrado es similar al de actividades.

## ğŸ“ Exportar a PDF

> Desde la vista de ediciÃ³n de reuniÃ³n se puede exportar la reuniÃ³n a PDF en dos formatos: normal y "BadenTracker". El botÃ³n abre un modal para elegir el formato y genera el PDF con toda la informaciÃ³n de la reuniÃ³n, actividades, responsables, materiales y logo del grupo.
>
> **Opciones de exportaciÃ³n:**
>
> - **Normal**: Formato estÃ¡ndar con todos los detalles de la reuniÃ³n.
> - **BadenTracker**: Formato simplificado para el seguimiento de actividades.

- El PDF incluye:
  - Datos generales de la reuniÃ³n (grupo, rama, fecha, lugar, coordinador, ronda solar, responsables, logo)
  - Tabla de actividades con hora, nombre, duraciÃ³n, encargado y comentarios
  - Tabla de materiales necesarios
  - Objetivos pedagÃ³gicos y contenidos generales

> La exportaciÃ³n se realiza con FPDF y el archivo [`reunion/pdfExport.php`](reunion/pdfExport.php) genera el PDF usando los datos de la base de datos.
---

## ğŸ–¼ï¸ Capturas del proyecto

### ğŸ“‹ Listado de reuniones

![Tabla de reuniones](img/reuniones-listado.png)

### ğŸ” Filtrado de reuniones

![Filtrado en tabla de reuniones](img/reuniones-filtrado.png)

### â• Crear reuniÃ³n

![Formulario para crear reuniÃ³n](img/reuniones-crear.png)

### âœï¸ Editar reuniÃ³n

![Formulario para editar reuniÃ³n](img/reuniones-editar.png)

### ğŸ“„ Exportar a PDF

![Exportar reuniÃ³n a PDF](img/reuniones-pdf.png)